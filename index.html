<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Parse CSV to JSON</title>
	
	
	<script src="https://fastcdn.org/Papa-Parse/4.1.2/papaparse.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type = "text/javascript" scr="papaparse.js"></script>
	<script type = "text/javascript" src="FileSaver.js"></script>
	
	
</head>

	
	
<body>
	<form class="form-inline">
		<div class="form-group">
  			<label for="files">Upload a CSV formatted file:</label>
  				<input type="file" id="files"  class="form-control" accept=".csv" required />
		
 			<button type="submit" id="submit" class="btn btn-primary" >Submit</button>
 		</div>
	</form>
	

	
	
<script type="application/javascript">
	
		$(document).ready(function(){
			
			$('#submit').on("click",function(e){
				e.preventDefault();
				if (!$('#files')[0].files.length){
					alert("Please choose at least one file to read the data.");
				}	
		
		
			
			var x = document.getElementById("files");
			Papa.parse(x.files[0],{
				header: true, complete: function(results)
        		{
					console.log("Parse results:", results.data);
					
							
					var blob = new Blob([JSON.stringify(results.data)],{type: "application/json"});
					saveAs(blob,"download.json");
		
					
					
					}
				});	
			});
	
		});
	
	

</script>
	
</body>
</html>
